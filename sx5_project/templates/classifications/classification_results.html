<div class="table-responsive">
    <table id="myTable" class="table">
        <thead>
            <tr>
                <th scope="col" class="align-middle">Position</th>
                <th scope="col" class="align-middle">Runner</th>
                <th scope="col" class="align-middle">Category</th>
                <th scope="col" class="align-middle">General Points</th>
                <th scope="col" class="align-middle">Gender Points</th>
                <th scope="col" class="align-middle">Category Points</th>               
            </tr>
        </thead>
        <tbody>
            {% for result in classification_results %}
                {% if result.general_points != 0 or result.gender_points != 0 or result.category_points != 0 %}
                <tr class="{{ race.hover_class }}">
                    <td class="align-middle">{{ forloop.counter }}</td>
                    <td class="align-middle">{{ result.runner }}</td>
                    <td class="align-middle">{{ result.runner_category }}</td>
                    <td class="align-middle">{{ result.general_points }}</td>
                    <td class="align-middle">{{ result.gender_points }}</td>
                    <td class="align-middle">{{ result.category_points }}</td>
                </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>

{% block extra_js %}
<script>
    // Custom sorting function
    $.fn.dataTable.ext.type.order['category-pre'] = function (data) {
        console.log("Sorting data: ", data); // Debugging line

        switch (data) {
            case 'MS':    return 1;
            case 'FS':    return 2;
            case 'NBS':   return 3;
            case 'M40':   return 4;
            case 'F40':   return 5;
            case 'NB40':  return 6;
            case 'M50':   return 7;
            case 'F50':   return 8;
            case 'NB50':  return 9;
            case 'M60':   return 10;
            case 'F60':   return 11;
            case 'NB60':  return 12;
            case 'M70':   return 13;
            case 'F70':   return 14;
            case 'NB70':  return 15;
            case 'M80':   return 16;
            case 'F80':   return 17;
            case 'NB80':  return 18;
            default:      return 19;
        }
    };


    $(document).ready(function() {
        $('#myTable').DataTable({
            "columnDefs": [
                { "type": "category-pre", "targets": [2] } // Use custom sorting for the Category column
            ],
            "order": [[2, 'asc']], // Default order
            "paging": false, // Disable pagination
            "info": false, // Hide the 'Showing 1 to N of N entries' info
            "pageLength": -1 // Show all rows
        });
    });

</script>
{% endblock %}
